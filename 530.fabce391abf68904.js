"use strict";(self.webpackChunkkanban_frontend=self.webpackChunkkanban_frontend||[]).push([[530],{2530:(I,c,r)=>{r.r(c),r.d(c,{AuthModule:()=>m});var g=r(6895),d=r(9197),i=r(4006),h=r(610),t=r(4650),v=r(263),C=r(7009),A=r(4859),b=r(4633),f=r(3546),p=r(9549),Z=r(4144),_=r(3162);function T(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"h3",11),t._uU(2,"Crear cuenta"),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.changeType("login"))}),t._uU(4," Ya tienes cuenta? "),t.qZA()()}}function w(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div")(1,"h3",11),t._uU(2,"Login"),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(n);const u=t.oxw();return t.KtG(u.changeType("signup"))}),t._uU(4," Nuevo usuario? "),t.qZA()()}}function y(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Debes ingresar un email v\xe1lido "),t.qZA())}function M(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," La contrase\xf1a debe tener al menos 6 caracteres "),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," La contrase\xf1as contrase\xf1as deben ser iguales "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"mat-form-field",4)(1,"mat-label"),t._uU(2,"Confirmar password"),t.qZA(),t._UZ(3,"input",14),t.YNc(4,x,2,0,"mat-error",2),t.qZA()),2&e){const n=t.oxw();t.Q6J("color",n.passwordConfirm.invalid?"warn":"accent"),t.xp6(4),t.Q6J("ngIf",n.passwordConfirm.dirty&&n.passwordConfirm.invalid)}}function O(e,o){1&e&&t._UZ(0,"mat-progress-bar",15)}class l{constructor(o,n,a,u){this.formBuilder=o,this.authService=n,this.snackBar=a,this.router=u,this.form=this.formBuilder.group({email:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(6)]],passwordConfirm:["",[i.kI.required]]},{validators:[(0,h.m)("password","passwordConfirm")]}),this.type="signup",this.loading=!1}ngOnInit(){}changeType(o){this.type=o}isValidForm(){return"signup"===this.type?this.form.controls.email.valid&&this.form.controls.password.valid&&this.form.controls.passwordConfirm.valid:this.form.controls.email.valid&&this.form.controls.password.valid}showErrorMessage(o="Error"){this.snackBar.open(o,"OK",{panelClass:["error-snackbar"],duration:4e3,horizontalPosition:"center",verticalPosition:"bottom"})}get isLogin(){return"login"===this.type}get isSignup(){return"signup"===this.type}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get passwordConfirm(){return this.form.get("passwordConfirm")}onSubmit(){this.loading=!0;const o=this.email.value,n=this.password.value;this.isLogin&&this.authService.attemptAuth("login",o,n).subscribe({next:()=>this.router.navigateByUrl("/kanban"),error:a=>{this.loading=!1,this.showErrorMessage(a.message)}}),this.isSignup&&this.authService.attemptAuth("register",o,n).subscribe({next:()=>this.router.navigateByUrl("/kanban"),error:a=>{this.loading=!1,this.showErrorMessage(a.message)}})}demo(){this.loading=!0,this.authService.attemptAuth("login","test@test.cl","123456").subscribe({next:()=>this.router.navigateByUrl("/kanban"),error:o=>{this.loading=!1,this.showErrorMessage(o.message)}})}}l.\u0275fac=function(o){return new(o||l)(t.Y36(i.qu),t.Y36(v.e),t.Y36(C.ux),t.Y36(d.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-auth"]],decls:24,vars:11,consts:[[1,"container"],[1,"card-container"],[4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"color"],["matInput","","formControlName","email","type","email","autocomplete","off"],["matInput","","formControlName","password","type","password","autocomplete","off"],[3,"color",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["mat-raised-button","","color","primary","type","button",1,"demo",3,"disabled","click"],["mode","indeterminate",4,"ngIf"],["mat-subheader",""],["mat-stroked-button","",3,"click"],["size","small","mat-stroked-button","",3,"click"],["matInput","","formControlName","passwordConfirm","type","password","autocomplete","off"],["mode","indeterminate"]],template:function(o,n){1&o&&(t.TgZ(0,"main")(1,"div",0)(2,"mat-card")(3,"div",1),t.YNc(4,T,5,0,"div",2),t.YNc(5,w,5,0,"div",2),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Email"),t.qZA(),t._UZ(10,"input",5),t.YNc(11,y,2,0,"mat-error",2),t.qZA(),t.TgZ(12,"mat-form-field",4)(13,"mat-label"),t._uU(14,"Password"),t.qZA(),t._UZ(15,"input",6),t.YNc(16,M,2,0,"mat-error",2),t.qZA(),t.YNc(17,J,5,2,"mat-form-field",7),t.TgZ(18,"button",8),t._uU(19," Aceptar "),t.qZA(),t.TgZ(20,"button",9),t.NdJ("click",function(){return n.demo()}),t._uU(21," Demo user "),t.qZA()()(),t.TgZ(22,"mat-card-footer"),t.YNc(23,O,1,0,"mat-progress-bar",10),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("ngIf",n.isSignup),t.xp6(1),t.Q6J("ngIf",n.isLogin),t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("color",n.email.valid?"accent":"primary"),t.xp6(4),t.Q6J("ngIf",n.email.invalid&&n.email.dirty),t.xp6(1),t.Q6J("color",n.password.valid?"accent":"primary"),t.xp6(4),t.Q6J("ngIf",n.password.invalid&&n.password.dirty),t.xp6(1),t.Q6J("ngIf",n.isSignup),t.xp6(1),t.Q6J("disabled",!n.isValidForm()||n.loading),t.xp6(2),t.Q6J("disabled",n.loading),t.xp6(3),t.Q6J("ngIf",n.loading))},dependencies:[g.O5,A.lW,b.gs,f.a8,f.rt,p.KE,p.hX,p.TO,Z.Nt,_.pW,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["[_nghost-%COMP%]{text-align:center}.logout[_ngcontent-%COMP%]{padding-top:5em}div.container[_ngcontent-%COMP%]{margin-top:5rem}.card-container[_ngcontent-%COMP%]{padding:2rem}mat-card[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.server-error[_ngcontent-%COMP%]{margin:8px 0}input[_ngcontent-%COMP%]{height:2em}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]{padding:.3em 0}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{vertical-align:top}h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:1.25rem}div.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.15em}form[_ngcontent-%COMP%]{margin:1.25rem 0}.demo[_ngcontent-%COMP%]{margin-left:10px}"]});const P=[{path:"",component:l}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.Bz.forChild(P),d.Bz]});var U=r(4466);class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[g.ez,s,U.m,i.UX]})}}]);